<%
if (reports && reports.length > 0) {
    var reports_sorted = _(reports).sortBy(function(r){
        if (typeof(r.item.dateDiagnosed) != 'undefined')
            return r.item.dateDiagnosed;
        else
            return '-99999';
    });

    _(reports_sorted.reverse()).each(function(report) {
        var date = report.item.dateDiagnosed;
        var name = report.item.name;
        var reaction = report.item.reaction;
        var specifics = report.item.specifics;
%>
    <tr>
        <% if (date) { %>
            <td><%= date %></td>
        <% } else { %>
            <td>Undated</td>
        <% } %>

        <td><%= name %></td>

    </tr>
    <% if (reaction) { %>
        <tr>
            <td colspan="2" class="details">
                Reaction: <%= reaction %><br><%= specifics %>
            </td>
        <tr>
    <% }
    })
}
else { %>
    <tr><td colspan="2">
        <h3>No reports</h3>
    </td></tr>
<% } %>
